<view><view data-event-opts="{{[['touchStart',[['hideEmoji',['$event']]]]]}}" class="content" onTouchStart="__e"><scroll-view class="msg-list" scroll-y="true" scroll-with-animation="{{scrollAnimation}}" scroll-top="{{scrollTop}}" scroll-into-view="{{scrollToView}}"><view class="row" id="{{'msg'+row.id}}" a:for="{{msgList}}" a:for-item="row" a:for-index="index" a:key="index"><block a:if="{{row.uid==myuid}}"><view class="my"><view class="left"><block a:if="{{row.type=='text'}}"><view class="bubble"><rich-text nodes="{{row.msg.content}}"></rich-text></view></block><block a:if="{{row.type=='voice'}}"><view data-event-opts="{{[['tap',[['playVoice',['$0'],[[['msgList','',index]]]]]]]}}" class="{{(('bubble voice')+' '+(playMsgid==row.id?'play':''))}}" onTap="__e"><view class="length">{{row.msg.length}}</view><view class="icon my-voice"></view></view></block><block a:if="{{row.type=='img'}}"><view data-event-opts="{{[['tap',[['showPic',['$0'],[[['msgList','',index]]]]]]]}}" class="bubble img" onTap="__e"><image style="{{'width:'+(row.msg.w+'px')+';'+('height:'+(row.msg.h+'px')+';')}}" src="{{row.msg.url}}"></image></view></block></view><view class="right"><image src="{{row.face}}"></image></view></view></block><block a:if="{{row.uid!=myuid}}"><view class="other"><view class="left"><image src="{{row.face}}"></image></view><view class="right"><view class="username"><view class="name">{{row.username}}</view><view class="time">{{row.time}}</view></view><block a:if="{{row.type=='text'}}"><view class="bubble"><rich-text nodes="{{row.msg.content}}"></rich-text></view></block><block a:if="{{row.type=='voice'}}"><view data-event-opts="{{[['tap',[['playVoice',['$0'],[[['msgList','',index]]]]]]]}}" class="{{(('bubble voice')+' '+(playMsgid==row.id?'play':''))}}" onTap="__e"><view class="icon other-voice"></view><view class="length">{{row.msg.length}}</view></view></block><block a:if="{{row.type=='img'}}"><view data-event-opts="{{[['tap',[['showPic',['$0'],[[['msgList','',index]]]]]]]}}" class="bubble img" onTap="__e"><image style="{{'width:'+(row.msg.w+'px')+';'+('height:'+(row.msg.h+'px')+';')}}" src="{{row.msg.url}}"></image></view></block></view></view></block></view></scroll-view></view><view data-event-opts="{{[['touchMove',[['discard',['$event']]]]]}}" class="{{(('emoji-box')+' '+showEmji)}}" catchTouchMove="__e"><swiper class="swiper" indicator-dots="true" duration="150"><swiper-item a:for="{{emojiList}}" a:for-item="page" a:for-index="pid" a:key="pid"><view data-event-opts="{{[['tap',[['addEmoji',['$0'],[[['emojiList','',pid],['','',eid]]]]]]]}}" onTap="__e" a:for="{{page}}" a:for-item="em" a:for-index="eid" a:key="eid"><image mode="widthFix" src="{{'/static/img/emoji/'+em.url}}"></image></view></swiper-item></swiper></view><view data-event-opts="{{[['touchMove',[['discard',['$event']]]]]}}" class="{{(('input-box')+' '+showEmji)}}" catchTouchMove="__e"><view class="voice"><view data-event-opts="{{[['tap',[['switchVoice',['$event']]]]]}}" class="{{(('icon')+' '+(isVoice?'jianpan':'yuyin'))}}" onTap="__e"></view></view><view class="textbox"><view data-event-opts="{{[['touchStart',[['voiceBegin',['$event']]]],['touchMove',[['voiceIng',['$event']]]],['touchEnd',[['voiceEnd',['$event']]]],['touchCancel',[['voiceCancel',['$event']]]]]}}" class="{{((('voice-mode')+' '+(isVoice?'':'hidden'))+' '+(recording?'recording':''))}}" onTouchStart="__e" catchTouchMove="__e" onTouchEnd="__e" onTouchCancel="__e">{{voiceTis}}</view><view class="{{(('text-mode')+' '+(isVoice?'hidden':''))}}"><view class="box"><textarea auto-height="true" id="textMsg" data-event-opts="{{[['input',[['__set_model',['','textMsg','$event',[]]]]]]}}" value="{{textMsg}}" onInput="__e"></textarea></view><view data-event-opts="{{[['tap',[['chooseEmoji',['$event']]]]]}}" class="em" onTap="__e"><view class="icon biaoqing"></view></view></view></view><view data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="more" onTap="__e"><view class="icon tupian"></view></view><label for="textMsg"><view data-event-opts="{{[['tap',[['sendText',['$event']]]]]}}" class="{{(('send')+' '+(isVoice?'hidden':''))}}" onTap="__e"><view class="btn">发送</view></view></label></view><view class="{{(('record')+' '+(recording?'':'hidden'))}}"><view class="{{(('ing')+' '+(willStop?'hidden':''))}}"><view class="icon luyin2"></view></view><view class="{{(('cancel')+' '+(willStop?'':'hidden'))}}"><view class="icon chehui"></view></view><view class="{{(('tis')+' '+(willStop?'change':''))}}">{{recordTis}}</view></view></view>